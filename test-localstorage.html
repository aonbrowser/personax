<!DOCTYPE html>
<html>
<head>
    <title>LocalStorage Test</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1e1e1e;
            color: #0f0;
        }
        pre {
            background: #000;
            padding: 10px;
            border: 1px solid #0f0;
            overflow: auto;
        }
        button {
            background: #0f0;
            color: #000;
            border: none;
            padding: 10px 20px;
            margin: 10px;
            cursor: pointer;
            font-weight: bold;
        }
        button:hover {
            background: #0a0;
        }
    </style>
</head>
<body>
    <h1>LocalStorage Debug Tool</h1>
    
    <div>
        <button onclick="showStorage()">Show All Storage</button>
        <button onclick="showS0Answers()">Show S0 Answers</button>
        <button onclick="clearS0()">Clear S0 Answers</button>
        <button onclick="clearAll()">Clear All Storage</button>
    </div>
    
    <h2>Storage Contents:</h2>
    <pre id="output">Click a button to see storage contents...</pre>
    
    <script>
        function showStorage() {
            let output = "=== ALL LOCALSTORAGE ===\n\n";
            for (let i = 0; i < localStorage.length; i++) {
                const key = localStorage.key(i);
                const value = localStorage.getItem(key);
                output += `KEY: ${key}\n`;
                try {
                    const parsed = JSON.parse(value);
                    output += `VALUE (parsed):\n${JSON.stringify(parsed, null, 2)}\n`;
                } catch {
                    output += `VALUE (raw): ${value}\n`;
                }
                output += "\n" + "=".repeat(50) + "\n\n";
            }
            if (localStorage.length === 0) {
                output = "LocalStorage is empty!";
            }
            document.getElementById('output').textContent = output;
        }
        
        function showS0Answers() {
            const s0Data = localStorage.getItem('S0_profile_answers');
            let output = "=== S0 PROFILE ANSWERS ===\n\n";
            
            if (s0Data) {
                try {
                    const parsed = JSON.parse(s0Data);
                    output += `Found ${Object.keys(parsed).length} answers:\n\n`;
                    output += JSON.stringify(parsed, null, 2);
                } catch (e) {
                    output += "Error parsing S0 data: " + e.message;
                }
            } else {
                output += "No S0 answers found in localStorage!";
            }
            
            document.getElementById('output').textContent = output;
        }
        
        function clearS0() {
            if (confirm("Are you sure you want to clear S0 answers?")) {
                localStorage.removeItem('S0_profile_answers');
                alert("S0 answers cleared!");
                showStorage();
            }
        }
        
        function clearAll() {
            if (confirm("Are you sure you want to clear ALL localStorage?")) {
                localStorage.clear();
                alert("All localStorage cleared!");
                showStorage();
            }
        }
        
        // Show storage on load
        window.onload = showStorage;
    </script>
</body>
</html>